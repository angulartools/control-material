<mat-select [hideSingleSelectionIndicator]="true" [(value)]="selectedCountryCode" disableOptionCentering (selectionChange)="changeSelectedCountryCode($event)" (openedChange)="onOpenChange($event)" panelClass="flag-list-panel">
  <mat-select-trigger>
    @if (showFlags) {
      <span class="flag-icon flag-icon-{{ selectedCountryCode }}"> </span>
    }
    @if (showLabels) {
      <span class="country-code ml-1">{{ getCountryLabel(selectedCountryCode) }}</span>
    }
  </mat-select-trigger>
  
  <!-- Input de busca injetado dinamicamente -->
  
  @for (code of filteredCountryCodes; track code) {
    <mat-option [value]="code" style="width: 100px;">
      @if (showFlags) {
        <span class="flag-icon flag-icon-{{ code }}"></span>
      }
      @if (showLabels) {
        <span class="country-code ml-1">{{ getCountryLabel(code) }}</span>
      }
    </mat-option>
  }
</mat-select>
